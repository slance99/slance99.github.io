{
  "hash": "94bc9a507bc8927e69bee1311a979d08",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Composite Volcanoes and the Ring of Fire\"\ndescription: \"Creating an infographic on the distribution of composite volcanoes around the world, the rock types that make up these volcanoes, and the geologic environments they form in.\"\nauthor:\n  - name: Sam Lance\n    affiliation: Master of Environmental Science and Management at the The Bren School (UCSB), Data Visualization (EDS 240)\ndate: 9 March, 2025\ncategories: [Data Visualization, R, Graphic Design] # self-defined categories\nimage: ranier.jpg\nformat:\n  html:\n    code-fold: true\n    toc: false\n    number-sections: true\n    embed-resources: true\n    theme: Lux\neditor: visual\nexecute:\n  echo: true\n  message: false\n  warning: false\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n#| echo: true\n#| message: false\n\nlibrary(ggplot2)\nlibrary(tidyverse)\nlibrary(here)\nlibrary(janitor)\nlibrary(patchwork)\nlibrary(lubridate)\nlibrary(forcats)\nlibrary(gghighlight)\nlibrary(stringr)\nlibrary(maps)\nlibrary(ggtext)\nlibrary(showtext)\nlibrary(scales)\nlibrary(sf)\nlibrary(rnaturalearth)\n\n#importing colors \ndorange <- c(\"#BA2D0B\")\nporange <- c(\"#ffba08\")\nnew_orange <- c(\"#f65026\")\nv_grey <- c(\"#c0c0c0\")\nv_black <- c(\"#000000\")\nv_white <- c(\"white\")\n\n#fonts\nfont_add_google(name = \"Roboto\", family = \"roboto\")\nshowtext_auto()\n```\n:::\n\n\n\n\n![Mount Ranier, a Composite Volcano. Image Courtesy of David Prasad from Welches, OR., United States, CC BY-SA 2.0 <https://creativecommons.org/licenses/by-sa/2.0>, via Wikimedia Commons](www/ranier.jpg){fig-alt=\"Photo of Mount Ranier from a Road in Welches, Oregon.\"}\n\n## The Personal Motivations\n\nAs a geologist turned geomorphologist, my academic interests generally return to the abiotic factors in our world. I have always been interested in volcanoes and their relationship to the movement of Earth's tectonic plates, but have never had the opportunity to learn more outside of my introductory geology courses.\n\nAs I was looking for an interesting dataset to create an infographic about, I discovered the Smithsonian Institution National Museum of Natural History's Global Volcanism Program's dataset. Detailing all known volcanic eruptions from the last 12,000 years, it provided the perfect opportunity for me to learn more about volcanoes and practice my skills in R.\n\nAfter looking into the data more closely, I realized it showed very clear trends that specific types of volcanoes, composite volcanoes, were clustered around the Pacific Ocean. This creates the famous Ring of Fire, formed due to the unique tectonic setting of the region, which naturally produces large, incredibly destructive volcanoes. While many people learn about volcanoes in middle school science courses, many do not know the mechanisms behind their formation. This infographic is meant to provide an opportunity to re-up that knowledge, and learn a bit more about composite volcanoes and how they are linked to the Ring of Fire. \n\n![Sam Sitting on a Rock on a Geology Field Trip to Lone Pine](www/sam_sitting.jpg){fig-alt=\"Photo of the Author with Short Brown Hair Wearing a Hat, Sitting on Rocks with a Blue Bakground, on a Geology Field Trip\"}\n\n## The Questions\n\nWhen designing this visualization, I wanted to answer three questions with my plots that would provide a non-scientific audience a better understanding of composite volcanoes. These questions are:\n\n**1. Where are composite volcanoes located around the world?**\n\n**2. What type of rock are composite volcanoes made of?**\n\n**3. What geologic environment do composite volcanoes primarily form in?**\n\nEach question inherently links to one another, as composite volcanoes form in subduction zones, which primarily generate Andesite, and are primarily located around the borders of the Pacific Ocean. This creates a strong, intertwined narriative that will communicate the information in a clear and concise way.\n\n## The Visualization\n\n![Composite Volcano Data Visualization](www/volc_vis.jpg){fig-alt=\"Final infographic showing the high concentration of volcanoes around the ring of fire. It also shows that these volcanoes are primarily made of andesite and form in subduction zones.\"}\n\n## Individual Plots\n\n### Wrangling\n\nPrior to creating any visualizations, my data needed moderate wrangling. All dates in the dataset were written as \"2000 BCE\", which needed to be converted into a numeric to be used in any analysis. Additionally, for this analysis I only wanted to look at eruptions with a confirmed eruption date after 0 CE, so I filtered out all eruptions with an eruption date of \"unknown\".\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| echo: true\n#| message: false\n\nvolcano_og <- read.csv(here(\"posts\", \"2025-03-09-data-vis-infographic\", \"data\", \"volcano_list.csv\"))\nvolcano_pop_og <- read.csv(here(\"posts\", \"2025-03-09-data-vis-infographic\", \"data\", \"volcano_pop.csv\"))\n\nvolcano_mod <- volcano_og |>\n  clean_names() |>\n  filter(last_known_eruption != \"Unknown\") |>\n  mutate(\n    eruption_year = case_when(\n      grepl(\"BCE\", last_known_eruption) ~ -as.numeric(gsub(\" BCE\", \"\", last_known_eruption)),\n      grepl(\"CE\", last_known_eruption)  ~ as.numeric(gsub(\" CE\", \"\", last_known_eruption)),\n      TRUE ~ as.numeric(last_known_eruption))) |>\n  arrange(eruption_year) |>\n  filter(eruption_year > 0)\n\n#CREATING MAP OF VOLCANOES\nworld <- ne_download(scale = 110, type = \"countries\", category = \"cultural\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `ne_110m_admin_0_countries' from data source \n  `/private/var/folders/7r/2ngr651x2rd0q43kgmpyvwvw0000gn/T/Rtmpyss73Z/ne_110m_admin_0_countries.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 177 features and 168 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -180 ymin: -90 xmax: 180 ymax: 83.64513\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n:::\n\n\n\n### Map of Composite Volcanoes\n\nThis figure is meant to answer the first question of the three: **where are composite volcanoes located around the world**? The map shows the location of all composite volcanoes in the dataset, with the color of the point representing the tectonic setting of the volcano. The map is centered on the Pacific Ocean, with the Ring of Fire clearly visible. This allows the viewer to see the  clustering of composite volcanoes around the Pacific Ocean.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| echo: true\n#| message: false\n#| \n#FILTERING COMPOSITE VOLCANOES\ncomposite_volcanoes <- volcano_mod |>\n  filter(volcano_landform == \"Composite\") \n\ncomposite_volcanoes_sum <- volcano_mod |>\n  filter(volcano_landform == \"Composite\") |>\n  group_by(tectonic_setting) |>\n  summarize(count = n())\n\nother_volcanoes <- volcano_mod |>\n  filter(volcano_landform != \"Composite\")\n\nvolcano_map <- ggplot(data = world) +\n  geom_sf(fill = v_grey, color = v_grey) +\n  geom_point(data = composite_volcanoes, \n             aes(x = longitude, y = latitude, color = dorange), \n             size = 1.25) +\n  scale_color_identity() +  # Use scale_color_identity to preserve the colors specified\n  theme_void() +\n  labs(title = NULL,\n       x = NULL, y = NULL) +\n  theme(legend.position = NULL, \n        legend.title = element_blank(),\n        plot.background = element_rect(fill = v_black))\n\n#volcano_map\n\n# ggsave(\n#   filename = here::here(\"final_images\", \"volcano_map.png\"),\n#   plot = volcano_map, \n#   device = \"png\",\n#   width = 8, \n#   height = 7,\n#   unit = \"in\"\n# )\n```\n:::\n\n\n\n### Bar Chart of Composite Volcano Rock Type\n\nThis figure is meant to answer the question: **what type of rock are composite volcanoes made of**? The bar chart reveals that the majority of composite volcanoes are Andesites, with Basalts and Trachyandesites also being common.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#CREATING NEW FILTERED DATASET \n\n#| echo: true\n#| message: false\n\n#levels(as.factor(volcano_mod$dominant_rock_type))\n\nrock_type <- volcano_mod |>\n  filter(eruption_year > 0) |>\n  filter(last_known_eruption != \"Unknown\") |>\n  filter(!dominant_rock_type %in% c(\"No Data (checked)\", \"\")) |>\n  filter(volcano_landform == \"Composite\") |>\n  mutate(rock_type = recode(dominant_rock_type,\n                           \"Andesite / Basaltic Andesite\" = \"Andesite\",\n                           \"Basalt / Picro-Basalt\" = \"Basalt\",\n                           \"Trachybasalt / Tephrite Basanite\" = \"Trachybasalt\",\n                           \"Trachyandesite / Basaltic Trachyandesite\" = \"Trachyandesite\",\n                           \"Phono-tephrite /  Tephri-phonolite\" = \"Other\",\n                           \"Trachyte / Trachydacite\" = \"Trachyte\")) \n\nrock_plot <- rock_type |>\n  ggplot(aes(x = fct_rev(fct_infreq(rock_type)))) +  # Reverse the order of the factor levels\n  geom_bar(fill = new_orange, alpha = 0.8) +\n  geom_text(stat = \"count\", aes(label = ..count.., hjust = -0.2), color = \"white\", size = 12) +  # Add count labels\n  coord_flip() +\n  scale_x_discrete(expand=c(0,0)) +\n  #scale_x_discrete(expand = expansion(add = c(-0.5, 0.05))) +\n  labs(x = NULL, \n       y = \"Total Number of Eruptions\", \n       title = \"Composite Volcanoes are Predominatly Andesites\",\n       subtitle = \"The main rock type that makes up composite volcanoes around the world are andesites\") +\n  gghighlight(dominant_rock_type == \"Andesite / Basaltic Andesite\", \n              use_direct_label = FALSE) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_text(color= v_grey, \n                                   size = 40, \n                                   family = \"roboto\"),\n        axis.title.y = element_text(color= v_grey, \n                                    size = 40, \n                                    family = \"roboto\"),\n        plot.title = element_text(color= v_grey, \n                                  size = 50, \n                                  family = \"roboto\",\n                                  face = \"bold\"),\n        plot.subtitle = element_text(color= v_grey, \n                                     size = 35, \n                                     family = \"roboto\",\n                                     face = \"italic\"),\n        plot.background = element_rect(fill = v_black),\n        panel.background = element_rect(fill = v_black),\n        panel.grid = element_line(color = v_black),\n        )\n\n# ggsave(\n#   filename = here::here(\"final_images\", \"rock_type.png\"),\n#   plot = rock_plot, \n#   device = \"png\",\n#   width = 9, \n#   height = 4.5,\n#   unit = \"in\"\n# )\n# rock_plot\n```\n:::\n\n\n\n### Donut Chart of Composite Volcano Formation\n\nThe final figure in the infographic is meant to answer the question: **what geologic environment do composite volcanoes primarily form in**? The donut chart shows that the majority of composite volcanoes form in subduction zones, with rift zones and hotspots being less common.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvolcano_loc <- read_csv(here(\"posts\", \"2025-03-09-data-vis-infographic\", \"data\", \"volcano_count.csv\"))\n\n# Compute percentages\nvolcano_loc$fraction = volcano_loc$eruption_count / sum(volcano_loc$eruption_count)\n\n# Compute the cumulative percentages (top of each rectangle)\nvolcano_loc$ymax = cumsum(volcano_loc$fraction)\n\n# Compute the bottom of each rectangle\nvolcano_loc$ymin = c(0, head(volcano_loc$ymax, n=-1))\n\nzone <- ggplot(volcano_loc, aes(ymax=ymax, \n                                ymin=ymin, \n                                xmax=4, \n                                xmin=3, \n                                fill=tectonic_setting)) +  # Remove the color aesthetic\n  geom_rect(color = NA) +  # Set the outline color to transparent\n  coord_polar(theta=\"y\") + \n  xlim(c(2, 4)) +\n  scale_fill_manual(values = c(\"#404040\",  \"#808080\", porange)) +\n  theme_void() +\n  theme(plot.background = element_rect(fill = v_black),\n        panel.background = element_rect(fill = v_black),\n        legend.position = \"none\")\n\n# zone\n# \n# ggsave(\n#   filename = here::here(\"final_images\", \"form_zone.png\"),\n#   plot = zone, \n#   device = \"png\",\n#   width =5, \n#   height =5,\n#   unit = \"in\"\n# )\n```\n:::\n\n\n\n### Creating the Infographic\n\nTo add final annotations and additional design elements to the infographic, I brought each plot into Powerpoint. This software gave me the flexibility to add text annotations, small volcano graphics, and plot components that would have been significantly more difficult when working in R.\n\n## Design Elements \n\n::: {.panel-tabset}\n## Graphic Form + General Design\n\nWhen brainstorming my design, all design elements centered around my conception of the map. I wanted the Ring of Fire to be fully visible with the Pacific Ocean centered, and text taking up the blank space in the middle. This allowed me to show the striking spatial clustering in this data, while also leaving me space to provide additioanl information and annotations. \n\nFrom there, I knew I needed to show how overwhelming amount of volcanoes that were made up andesite and formed in subduction zones. A mix of a bar chart created using gg_highlight and a donut chart with the same visual effect were perfect to emphaisize this point. I placed these below my map, and right below my last annotation in the Pacific Ocean, so the eye naturally gravitates towards them after fully reading the text.\n\n## Text\n\nThe overall story of the infographic is provided by the text annotations. I wanted to create a series of questions in my walkthrough, and have the next figure help provide the answer. Additionally, since the topic is foreign to most of my viewers, I wanted to make sure I provided scientific background to terms people might not have heard before such as subduction or andesite. Each annotation is meant to be directly related to a graphic, and provide clear yet accessible context. For this reason, text on the actual graphs was kept incredibly minimal, to let the annotations speak for themselves.\n\n## Theme + Color + Typography\n\nTo stay with the volcano theme, I chose a color palette that reminded me of different elements of volcanoes: grey for volcanic ash, black for obsidian formed by composite volcanoes, and my highlighting colors shades of red and orange for magma. While I likely could have added some fun flame text throughout the infographic, I wanted this to be something that could be sent to a teacher or used in a classroom, so I kept the design more professional and used the Roboto font throughout.\n\n\n## Message + Contextualization\n\nThe overall message of this infographic is that composite volcanoes form in the Ring of Fire due to the unique tectonic setting of the region. Plain language and a minimal color scheme help provide a visually interesting but minimally technical graphic that can be understood by a mass audience. \n\nEach plot on the graph is meant to work together to contextualize the others. While the map alone or bar + donut plots alone could provide valuable information about composite volcanoes, together they showcase the broader overall trends and provide a more in-depth understanding. The captions support this partnership, providing a guiding narriative that keeps the viewer moving down the graphic. \n\n## Accessibility\n\nWhile my infographic does not specifically use a colorblind friendly palette, the majority of the graphic is black, white, and grey. All data is conveyed both with visual elements as well as color, so a completely colorblind viewer of the graphic would not be missing any information that a viewer with full color vision would have.\n\n## DEI\n\nFor this project, the goal was to make knowledge about composite volcanoes more accessible to a genral audience. While this does innately promote the inclusion element of DEI, the project does not view the data through a DEI lens. A future infographic could use this same data to see what populations could be most affected by volcanoes, especially at risk communities. \n\n\n:::\n\n\n## Acknowledgements\n\nThis project is coming together with the help of Sam Shanny-Csik the instructor of EDS 240 - Data Visualization at the Bren School at UCSB. The data used in this project is from the Smithsonian Institution National Museum of Natural History's Global Volcanism Program, and the map data is from the Natural Earth database.\n\n![Author Diving Deep into Volcanoes for Her Project, Feeling Like Gollum](www/sam_gollum.jpg){fig-alt=\"Sam Lance Photoshopped Hereself onto a Photo of Gollum from Lord of the Rings Falling into a Volcano as a Joke.\"}\n\n\n## Code\n\nEach plot on the graph is meant to work together to contextualize the others. While the map alone or bar + donut plots alone could provide valuable information about composite volcanoes, together they showcase the broader overall trends and provide a more in-depth understanding. The captions support this partnership, providing a guiding narriative that keeps the viewer moving down the graphic. ",
    "supporting": [
      "blog_post_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}